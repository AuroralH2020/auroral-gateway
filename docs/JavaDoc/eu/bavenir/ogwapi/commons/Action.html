<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_191) on Mon Mar 25 15:40:31 CET 2019 -->
<title>Action</title>
<meta name="date" content="2019-03-25">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Action";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Action.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../eu/bavenir/ogwapi/commons/CommunicationManager.html" title="class in eu.bavenir.ogwapi.commons"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?eu/bavenir/ogwapi/commons/Action.html" target="_top">Frames</a></li>
<li><a href="Action.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">eu.bavenir.ogwapi.commons</div>
<h2 title="Class Action" class="title">Class Action</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>eu.bavenir.ogwapi.commons.Action</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">Action</span>
extends java.lang.Object
implements java.io.Serializable</pre>
<div class="block">This class represents an action a local infrastructure can execute. It keeps a list of <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a>
 that are waiting to be executed (pending), is currently being executed (running) and a set of tasks and their return 
 values that are done (either finished successfully or unsuccessfully).
 
 An instance of this class is created for each action an object can perform according to its TD. Each request for action
 that arrives has its corresponding <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> created and is queued into a linked list
 with pending state. Every second this class checks whether there is a task still running and if not, the next task in
 the queue is being executed. Tasks that will not make it into running state in a time frame configured by 
 <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_PENDINGTASKTIMEOUT"><code>CONF_PARAM_PENDINGTASKTIMEOUT</code></a> are periodically looked for and moved into finished
 tasks set, where they are flagged as timed out. The number of tasks in the pending queue can be limited by 
 <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_MAXNUMBEROFPENDINGTASKS"><code>CONF_PARAM_MAXNUMBEROFPENDINGTASKS</code></a> configuration parameter. 
 
 Running task can be updated by the executing object by calling <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#updateTask-java.lang.String-java.lang.String-java.util.Map-"><code>updateTask</code></a> 
 method. During the update a new status of the task can be set and a return value can be stored. This can be also 
 used to periodically store preliminary results, see the method documentation. 
 
 After the running task is updated to finished/failed status, it is stored in the set of tasks that are done and a new
 task is taken from the pending list. The finished / failed task is retained for the period defined by 
 <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_DEF_TIMETOKEEPRETURNVALUES"><code>CONF_DEF_TIMETOKEEPRETURNVALUES</code></a>.
 
 The valid states for each task are following:
 
     pending --> running --> finished
           \        |
            \       v
             \-> failed
 
 
 To easier grasp the relationship between actions and tasks, consider the following example: 
 Imagine a door (object) that is capable of opening (action) and closing (action). When Bob steps up to the closed door 
 he invokes an action (opening) and this particular execution (Bob's opening of the door) is referenced to as a task.
 This task has its own ID and can be polled for status at any time, to see whether or not it is already done. 
 When Alice also wants to interact with door's actions, but her tasks need to line up behind Bob's, pending their 
 executions until the former tasks are finished.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>sulfo</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../serialized-form.html#eu.bavenir.ogwapi.commons.Action">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#actionId">actionId</a></span></code>
<div class="block">The ID of the action.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#ATTR_CREATIONTIME">ATTR_CREATIONTIME</a></span></code>
<div class="block">JSON attribute name for creation time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#ATTR_ENDTIME">ATTR_ENDTIME</a></span></code>
<div class="block">JSON attribute name for end time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#ATTR_RETURNVALUE">ATTR_RETURNVALUE</a></span></code>
<div class="block">JSON attribute name for return value.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#ATTR_STARTTIME">ATTR_STARTTIME</a></span></code>
<div class="block">JSON attribute name for start time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#ATTR_STATUS">ATTR_STATUS</a></span></code>
<div class="block">JSON attribute name for status.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#ATTR_TASKID">ATTR_TASKID</a></span></code>
<div class="block">JSON attribute name for task ID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#ATTR_TOTALTIME">ATTR_TOTALTIME</a></span></code>
<div class="block">JSON attribute name for total time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_DEF_MAXNUMBEROFPENDINGTASKS">CONF_DEF_MAXNUMBEROFPENDINGTASKS</a></span></code>
<div class="block">Default value for <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_PENDINGTASKTIMEOUT"><code>CONF_PARAM_PENDINGTASKTIMEOUT</code></a> configuration parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_DEF_PENDINGTASKTIMEOUT">CONF_DEF_PENDINGTASKTIMEOUT</a></span></code>
<div class="block">Default value for <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_PENDINGTASKTIMEOUT"><code>CONF_PARAM_PENDINGTASKTIMEOUT</code></a> configuration parameter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_DEF_TIMETOKEEPRETURNVALUES">CONF_DEF_TIMETOKEEPRETURNVALUES</a></span></code>
<div class="block">Default value for <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_TIMETOKEEPRETURNVALUES"><code>CONF_PARAM_TIMETOKEEPRETURNVALUES</code></a> configuration parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_MAXNUMBEROFPENDINGTASKS">CONF_PARAM_MAXNUMBEROFPENDINGTASKS</a></span></code>
<div class="block">Maximum number of tasks being queued in pending status, waiting to be
 run.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_PENDINGTASKTIMEOUT">CONF_PARAM_PENDINGTASKTIMEOUT</a></span></code>
<div class="block">If a task is pending to be run, how long (in minutes) it should remain in the 
 queue before being tagged as failed by timing out.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_TIMETOKEEPRETURNVALUES">CONF_PARAM_TIMETOKEEPRETURNVALUES</a></span></code>
<div class="block">This parameter sets how long (in minutes) after successful or failed 
 execution a task's return value should be retained.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.commons.configuration2.XMLConfiguration</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#config">config</a></span></code>
<div class="block">Configuration of the OGWAPI.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../eu/bavenir/ogwapi/commons/connectors/AgentConnector.html" title="class in eu.bavenir.ogwapi.commons.connectors">AgentConnector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#connector">connector</a></span></code>
<div class="block">Instance of the <a href="../../../../eu/bavenir/ogwapi/commons/connectors/AgentConnector.html" title="class in eu.bavenir.ogwapi.commons.connectors"><code>AgentConnector</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Set&lt;<a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons">Task</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#finishedTasks">finishedTasks</a></span></code>
<div class="block">List of finished <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a> (also a place for failed tasks).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.logging.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#logger">logger</a></span></code>
<div class="block">Logger of the OGWAPI.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#maxNumberOfPendingTasks">maxNumberOfPendingTasks</a></span></code>
<div class="block">Number obtained from the <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_MAXNUMBEROFPENDINGTASKS"><code>CONF_PARAM_MAXNUMBEROFPENDINGTASKS</code></a> configuration 
 parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#MINUTE">MINUTE</a></span></code>
<div class="block">Number of milliseconds in a minute.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#objectId">objectId</a></span></code>
<div class="block">This is the object ID of the action owner (usually the local object, represented by its 
 <a href="../../../../eu/bavenir/ogwapi/commons/ConnectionDescriptor.html" title="class in eu.bavenir.ogwapi.commons"><code>ConnectionDescriptor</code></a>).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.List&lt;<a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons">Task</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#pendingTasks">pendingTasks</a></span></code>
<div class="block">List of pending <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#pendingTaskTimeout">pendingTaskTimeout</a></span></code>
<div class="block">Number obtained from the <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_PENDINGTASKTIMEOUT"><code>CONF_PARAM_PENDINGTASKTIMEOUT</code></a> configuration 
 parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons">Task</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#runningTask">runningTask</a></span></code>
<div class="block">The running <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#SECOND">SECOND</a></span></code>
<div class="block">Number of milliseconds in a second.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#serialVersionUID">serialVersionUID</a></span></code>
<div class="block">A unique serial version identifier</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#TIMER1_START">TIMER1_START</a></span></code>
<div class="block">Defines when should a timer start its count.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#timeToKeepReturnValues">timeToKeepReturnValues</a></span></code>
<div class="block">The number obtained from the <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_TIMETOKEEPRETURNVALUES"><code>CONF_PARAM_TIMETOKEEPRETURNVALUES</code></a> 
 configuration parameter.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#Action-org.apache.commons.configuration2.XMLConfiguration-java.lang.String-java.lang.String-eu.bavenir.ogwapi.commons.connectors.AgentConnector-java.util.logging.Logger-">Action</a></span>(org.apache.commons.configuration2.XMLConfiguration&nbsp;config,
      java.lang.String&nbsp;objectId,
      java.lang.String&nbsp;actionId,
      <a href="../../../../eu/bavenir/ogwapi/commons/connectors/AgentConnector.html" title="class in eu.bavenir.ogwapi.commons.connectors">AgentConnector</a>&nbsp;connector,
      java.util.logging.Logger&nbsp;logger)</code>
<div class="block">Constructor, initialises field, loads configuration and starts timers.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../eu/bavenir/ogwapi/commons/messages/NetworkMessageResponse.html" title="class in eu.bavenir.ogwapi.commons.messages">NetworkMessageResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#cancelTask-java.lang.String-java.lang.String-java.util.Map-">cancelTask</a></span>(java.lang.String&nbsp;taskId,
          java.lang.String&nbsp;body,
          java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;parameters)</code>
<div class="block">This method cancels <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_RUNNING"><code>running</code></a> or <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_PENDING"><code>pending</code></a>
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#createNewTask-java.lang.String-java.lang.String-java.util.Map-">createNewTask</a></span>(java.lang.String&nbsp;sourceOid,
             java.lang.String&nbsp;body,
             java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;parameters)</code>
<div class="block">Creates a new <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> in a pending state.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>javax.json.JsonObject</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#createTaskStatusJson-java.lang.String-">createTaskStatusJson</a></span>(java.lang.String&nbsp;taskId)</code>
<div class="block">This method retrieves the status of a <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> in a form of JSON.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#getActionId--">getActionId</a></span>()</code>
<div class="block">Getter for action ID.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#getNumberOfTasksInCertainStatus-byte-">getNumberOfTasksInCertainStatus</a></span>(byte&nbsp;status)</code>
<div class="block">Returns the number of <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a> that are in a status defined by the parameter.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#getObjectId--">getObjectId</a></span>()</code>
<div class="block">Getter for object ID.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#getTaskReturnValue-java.lang.String-">getTaskReturnValue</a></span>(java.lang.String&nbsp;taskId)</code>
<div class="block">Retrieves a return value of a <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#getTaskStatus-java.lang.String-">getTaskStatus</a></span>(java.lang.String&nbsp;taskId)</code>
<div class="block">Returns a status of a <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> identified by the parameter.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#getTaskStatusString-java.lang.String-">getTaskStatusString</a></span>(java.lang.String&nbsp;taskId)</code>
<div class="block">Same as the {@link #getTaskStatus(String) getTaskStatus, but returns string instead of byte.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#printStatusOfAllTasks--">printStatusOfAllTasks</a></span>()</code>
<div class="block">Debugging method for convenient printout of all tasks for this particular action.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#purgeOutdatedReturnValues--">purgeOutdatedReturnValues</a></span>()</code>
<div class="block">This method checks the pool of finished / failed <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a> and removes those after expiration.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#purgeTimedOutPendingTasks--">purgeTimedOutPendingTasks</a></span>()</code>
<div class="block">This method checks the queue of pending <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a> and removes those after expiration.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons">Task</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#searchForTask-java.lang.String-boolean-">searchForTask</a></span>(java.lang.String&nbsp;taskId,
             boolean&nbsp;searchAlsoAmongFinishedTasks)</code>
<div class="block">Searches for a <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> identified by the parameter.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#updateTask-java.lang.String-java.lang.String-java.util.Map-">updateTask</a></span>(java.lang.String&nbsp;taskStatus,
          java.lang.String&nbsp;returnValue,
          java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;parameters)</code>
<div class="block">Method for updating any <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> that is <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_RUNNING"><code>running</code></a>
 state.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../eu/bavenir/ogwapi/commons/Action.html#workThroughTasks--">workThroughTasks</a></span>()</code>
<div class="block">This method is called by a timer every second, checking whether or not there is <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>
 running and if there is none, it takes the first one from the pending queue.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="serialVersionUID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serialVersionUID</h4>
<pre>private static final&nbsp;long serialVersionUID</pre>
<div class="block">A unique serial version identifier</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>Serializable</code>, 
<a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.serialVersionUID">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONF_PARAM_TIMETOKEEPRETURNVALUES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONF_PARAM_TIMETOKEEPRETURNVALUES</h4>
<pre>private static final transient&nbsp;java.lang.String CONF_PARAM_TIMETOKEEPRETURNVALUES</pre>
<div class="block">This parameter sets how long (in minutes) after successful or failed 
 execution a task's return value should be retained. In other words, if a 
 task is finished or failed, its return value will be deleted from the 
 OGWAPI after this number of minutes. This is to prevent the return
 values from piling up in the device's memory.
 
 If not set, it defaults to 1440 minutes (24 hours).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.CONF_PARAM_TIMETOKEEPRETURNVALUES">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONF_DEF_TIMETOKEEPRETURNVALUES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONF_DEF_TIMETOKEEPRETURNVALUES</h4>
<pre>private static final transient&nbsp;int CONF_DEF_TIMETOKEEPRETURNVALUES</pre>
<div class="block">Default value for <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_TIMETOKEEPRETURNVALUES"><code>CONF_PARAM_TIMETOKEEPRETURNVALUES</code></a> configuration parameter.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.CONF_DEF_TIMETOKEEPRETURNVALUES">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONF_PARAM_PENDINGTASKTIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONF_PARAM_PENDINGTASKTIMEOUT</h4>
<pre>private static final transient&nbsp;java.lang.String CONF_PARAM_PENDINGTASKTIMEOUT</pre>
<div class="block">If a task is pending to be run, how long (in minutes) it should remain in the 
 queue before being tagged as failed by timing out. This is infrastructure
 specific - if a task usually takes hours to complete, this value should 
 be set to higher number. If it takes only a few seconds,
 it usually makes no sense to wait for more than an hour. Again, it 
 highly depends on what the action is about and integrator's common sense.  
 Default value is 120 minutes (2 hours).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.CONF_PARAM_PENDINGTASKTIMEOUT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONF_DEF_PENDINGTASKTIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONF_DEF_PENDINGTASKTIMEOUT</h4>
<pre>private static final transient&nbsp;int CONF_DEF_PENDINGTASKTIMEOUT</pre>
<div class="block">Default value for <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_PENDINGTASKTIMEOUT"><code>CONF_PARAM_PENDINGTASKTIMEOUT</code></a> configuration parameter.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.CONF_DEF_PENDINGTASKTIMEOUT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONF_PARAM_MAXNUMBEROFPENDINGTASKS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONF_PARAM_MAXNUMBEROFPENDINGTASKS</h4>
<pre>private static final transient&nbsp;java.lang.String CONF_PARAM_MAXNUMBEROFPENDINGTASKS</pre>
<div class="block">Maximum number of tasks being queued in pending status, waiting to be
 run. This depends on number of objects that are connecting via this 
 gateway, and the memory size of the device it runs on. Setting a 
 limit prevents a malicious object to fill the memory with pending 
 requests. Note that is a limit per action, so if you have two
 actions that can be executed on your local object, 
 maximum number of pending tasks in memory will be twice this number.  
 
 Default is 128.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.CONF_PARAM_MAXNUMBEROFPENDINGTASKS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONF_DEF_MAXNUMBEROFPENDINGTASKS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONF_DEF_MAXNUMBEROFPENDINGTASKS</h4>
<pre>private static final transient&nbsp;int CONF_DEF_MAXNUMBEROFPENDINGTASKS</pre>
<div class="block">Default value for <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_PENDINGTASKTIMEOUT"><code>CONF_PARAM_PENDINGTASKTIMEOUT</code></a> configuration parameter.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.CONF_DEF_MAXNUMBEROFPENDINGTASKS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="TIMER1_START">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TIMER1_START</h4>
<pre>private static final transient&nbsp;int TIMER1_START</pre>
<div class="block">Defines when should a timer start its count.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.TIMER1_START">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MINUTE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MINUTE</h4>
<pre>private static final transient&nbsp;int MINUTE</pre>
<div class="block">Number of milliseconds in a minute.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.MINUTE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SECOND">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SECOND</h4>
<pre>private static final transient&nbsp;int SECOND</pre>
<div class="block">Number of milliseconds in a second.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.SECOND">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_TASKID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_TASKID</h4>
<pre>public static final transient&nbsp;java.lang.String ATTR_TASKID</pre>
<div class="block">JSON attribute name for task ID.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.ATTR_TASKID">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_STATUS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_STATUS</h4>
<pre>public static final transient&nbsp;java.lang.String ATTR_STATUS</pre>
<div class="block">JSON attribute name for status.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.ATTR_STATUS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_CREATIONTIME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_CREATIONTIME</h4>
<pre>public static final transient&nbsp;java.lang.String ATTR_CREATIONTIME</pre>
<div class="block">JSON attribute name for creation time.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.ATTR_CREATIONTIME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_STARTTIME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_STARTTIME</h4>
<pre>public static final transient&nbsp;java.lang.String ATTR_STARTTIME</pre>
<div class="block">JSON attribute name for start time.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.ATTR_STARTTIME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_ENDTIME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_ENDTIME</h4>
<pre>public static final transient&nbsp;java.lang.String ATTR_ENDTIME</pre>
<div class="block">JSON attribute name for end time.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.ATTR_ENDTIME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_TOTALTIME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_TOTALTIME</h4>
<pre>public static final transient&nbsp;java.lang.String ATTR_TOTALTIME</pre>
<div class="block">JSON attribute name for total time.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.ATTR_TOTALTIME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_RETURNVALUE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_RETURNVALUE</h4>
<pre>public static final transient&nbsp;java.lang.String ATTR_RETURNVALUE</pre>
<div class="block">JSON attribute name for return value.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#eu.bavenir.ogwapi.commons.Action.ATTR_RETURNVALUE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="objectId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>objectId</h4>
<pre>private&nbsp;java.lang.String objectId</pre>
<div class="block">This is the object ID of the action owner (usually the local object, represented by its 
 <a href="../../../../eu/bavenir/ogwapi/commons/ConnectionDescriptor.html" title="class in eu.bavenir.ogwapi.commons"><code>ConnectionDescriptor</code></a>).</div>
</li>
</ul>
<a name="actionId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>actionId</h4>
<pre>private&nbsp;java.lang.String actionId</pre>
<div class="block">The ID of the action.</div>
</li>
</ul>
<a name="pendingTasks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pendingTasks</h4>
<pre>private transient&nbsp;java.util.List&lt;<a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons">Task</a>&gt; pendingTasks</pre>
<div class="block">List of pending <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a>.</div>
</li>
</ul>
<a name="finishedTasks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishedTasks</h4>
<pre>private transient&nbsp;java.util.Set&lt;<a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons">Task</a>&gt; finishedTasks</pre>
<div class="block">List of finished <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a> (also a place for failed tasks).</div>
</li>
</ul>
<a name="runningTask">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runningTask</h4>
<pre>private transient&nbsp;<a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons">Task</a> runningTask</pre>
<div class="block">The running <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>.</div>
</li>
</ul>
<a name="timeToKeepReturnValues">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timeToKeepReturnValues</h4>
<pre>private transient&nbsp;long timeToKeepReturnValues</pre>
<div class="block">The number obtained from the <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_TIMETOKEEPRETURNVALUES"><code>CONF_PARAM_TIMETOKEEPRETURNVALUES</code></a> 
 configuration parameter.</div>
</li>
</ul>
<a name="pendingTaskTimeout">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pendingTaskTimeout</h4>
<pre>private transient&nbsp;long pendingTaskTimeout</pre>
<div class="block">Number obtained from the <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_PENDINGTASKTIMEOUT"><code>CONF_PARAM_PENDINGTASKTIMEOUT</code></a> configuration 
 parameter.</div>
</li>
</ul>
<a name="maxNumberOfPendingTasks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxNumberOfPendingTasks</h4>
<pre>private transient&nbsp;int maxNumberOfPendingTasks</pre>
<div class="block">Number obtained from the <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#CONF_PARAM_MAXNUMBEROFPENDINGTASKS"><code>CONF_PARAM_MAXNUMBEROFPENDINGTASKS</code></a> configuration 
 parameter.</div>
</li>
</ul>
<a name="connector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connector</h4>
<pre>private transient&nbsp;<a href="../../../../eu/bavenir/ogwapi/commons/connectors/AgentConnector.html" title="class in eu.bavenir.ogwapi.commons.connectors">AgentConnector</a> connector</pre>
<div class="block">Instance of the <a href="../../../../eu/bavenir/ogwapi/commons/connectors/AgentConnector.html" title="class in eu.bavenir.ogwapi.commons.connectors"><code>AgentConnector</code></a>.</div>
</li>
</ul>
<a name="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>private transient&nbsp;java.util.logging.Logger logger</pre>
<div class="block">Logger of the OGWAPI.</div>
</li>
</ul>
<a name="config">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>config</h4>
<pre>private transient&nbsp;org.apache.commons.configuration2.XMLConfiguration config</pre>
<div class="block">Configuration of the OGWAPI.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Action-org.apache.commons.configuration2.XMLConfiguration-java.lang.String-java.lang.String-eu.bavenir.ogwapi.commons.connectors.AgentConnector-java.util.logging.Logger-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Action</h4>
<pre>public&nbsp;Action(org.apache.commons.configuration2.XMLConfiguration&nbsp;config,
              java.lang.String&nbsp;objectId,
              java.lang.String&nbsp;actionId,
              <a href="../../../../eu/bavenir/ogwapi/commons/connectors/AgentConnector.html" title="class in eu.bavenir.ogwapi.commons.connectors">AgentConnector</a>&nbsp;connector,
              java.util.logging.Logger&nbsp;logger)</pre>
<div class="block">Constructor, initialises field, loads configuration and starts timers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - Configuration of the OGWAPI.</dd>
<dd><code>objectId</code> - Object ID of the object that owns this instance of the action class.</dd>
<dd><code>actionId</code> - Action ID.</dd>
<dd><code>connector</code> - Instance of the <a href="../../../../eu/bavenir/ogwapi/commons/connectors/AgentConnector.html" title="class in eu.bavenir.ogwapi.commons.connectors"><code>AgentConnector</code></a>.</dd>
<dd><code>logger</code> - Logger of the OGWAPI.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getObjectId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getObjectId</h4>
<pre>public&nbsp;java.lang.String&nbsp;getObjectId()</pre>
<div class="block">Getter for object ID.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getActionId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActionId</h4>
<pre>public&nbsp;java.lang.String&nbsp;getActionId()</pre>
<div class="block">Getter for action ID.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getNumberOfTasksInCertainStatus-byte-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfTasksInCertainStatus</h4>
<pre>public&nbsp;int&nbsp;getNumberOfTasksInCertainStatus(byte&nbsp;status)</pre>
<div class="block">Returns the number of <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a> that are in a status defined by the parameter. 
 
 Valid values are:
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_FAILED"><code>failed</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_FINISHED"><code>finished</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_PENDING"><code>pending</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_RUNNING"><code>running</code></a> (this will return either 0 or 1).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>status</code> - The status of tasks in question.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Number of tasks in a particular state.</dd>
</dl>
</li>
</ul>
<a name="getTaskStatus-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTaskStatus</h4>
<pre>public&nbsp;byte&nbsp;getTaskStatus(java.lang.String&nbsp;taskId)</pre>
<div class="block">Returns a status of a <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> identified by the parameter.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>taskId</code> - ID of the <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A status of the task. Valid return values are:
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_FAILED"><code>failed</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_FINISHED"><code>finished</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_PENDING"><code>pending</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_RUNNING"><code>running</code></a>.</dd>
</dl>
</li>
</ul>
<a name="getTaskStatusString-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTaskStatusString</h4>
<pre>public&nbsp;java.lang.String&nbsp;getTaskStatusString(java.lang.String&nbsp;taskId)</pre>
<div class="block">Same as the {@link #getTaskStatus(String) getTaskStatus, but returns string instead of byte.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>taskId</code> - ID of the <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A status of the task. Valid return values are:
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_FAILED"><code>failed</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_FINISHED"><code>finished</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_PENDING"><code>pending</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_RUNNING"><code>running</code></a>.</dd>
</dl>
</li>
</ul>
<a name="getTaskReturnValue-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTaskReturnValue</h4>
<pre>public&nbsp;java.lang.String&nbsp;getTaskReturnValue(java.lang.String&nbsp;taskId)</pre>
<div class="block">Retrieves a return value of a <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>. The return value gets uploaded by using the 
 <a href="../../../../eu/bavenir/ogwapi/commons/Action.html#updateTask-java.lang.String-java.lang.String-java.util.Map-"><code>updateTask</code></a> method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>taskId</code> - ID of the task.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Return value previously uploaded by executing object.</dd>
</dl>
</li>
</ul>
<a name="createNewTask-java.lang.String-java.lang.String-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNewTask</h4>
<pre>public&nbsp;java.lang.String&nbsp;createNewTask(java.lang.String&nbsp;sourceOid,
                                      java.lang.String&nbsp;body,
                                      java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;parameters)</pre>
<div class="block">Creates a new <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> in a pending state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sourceOid</code> - Object ID of the requesting object.</dd>
<dd><code>body</code> - Any JSON that is necessary to forward to the object once it is time to start execution.</dd>
<dd><code>parameters</code> - Any parameters necessary to be supplied with the body.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A task ID.</dd>
</dl>
</li>
</ul>
<a name="updateTask-java.lang.String-java.lang.String-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateTask</h4>
<pre>public&nbsp;boolean&nbsp;updateTask(java.lang.String&nbsp;taskStatus,
                          java.lang.String&nbsp;returnValue,
                          java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;parameters)</pre>
<div class="block">Method for updating any <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> that is <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_RUNNING"><code>running</code></a>
 state. This is called by the object that is currently executing the task. If <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_RUNNING"><code>running</code></a>
 state is set a new state, the task representation will continue in execution and a return value is overwritten by 
 the new value (if provided). This way preliminary results can be stored. 
 
 When status different from running is provided, the task will stop the timers and is moved into set of finished/failed
 tasks, waiting for the return value to be retrieved.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>taskStatus</code> - New task status. Following are the accepted values: <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_RUNNING"><code>running</code></a>,
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_FINISHED"><code>finished</code></a> and <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_FAILED"><code>failed</code></a>.</dd>
<dd><code>returnValue</code> - Either final or preliminary return value. This will be returned to requesting object when it asks for status.</dd>
<dd><code>parameters</code> - Anything that needs to be sent along with the return value.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the update was successful. If there is no such task or it can't be put into desired state, returns false.</dd>
</dl>
</li>
</ul>
<a name="cancelTask-java.lang.String-java.lang.String-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelTask</h4>
<pre>public&nbsp;<a href="../../../../eu/bavenir/ogwapi/commons/messages/NetworkMessageResponse.html" title="class in eu.bavenir.ogwapi.commons.messages">NetworkMessageResponse</a>&nbsp;cancelTask(java.lang.String&nbsp;taskId,
                                         java.lang.String&nbsp;body,
                                         java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;parameters)</pre>
<div class="block">This method cancels <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_RUNNING"><code>running</code></a> or <a href="../../../../eu/bavenir/ogwapi/commons/Task.html#TASKSTATUS_STRING_PENDING"><code>pending</code></a>
 <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>taskId</code> - The ID of the task.</dd>
<dd><code>body</code> - If there is a body that needs to be sent along with request.</dd>
<dd><code>parameters</code> - If there are parameters needed to be sent along with the body.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Response message with values from <a href="../../../../eu/bavenir/ogwapi/commons/connectors/AgentConnector.html" title="class in eu.bavenir.ogwapi.commons.connectors"><code>AgentConnector</code></a>, or
 or null if there is no such task / the task status does not permit attempts to cancel it.</dd>
</dl>
</li>
</ul>
<a name="createTaskStatusJson-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTaskStatusJson</h4>
<pre>public&nbsp;javax.json.JsonObject&nbsp;createTaskStatusJson(java.lang.String&nbsp;taskId)</pre>
<div class="block">This method retrieves the status of a <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> in a form of JSON.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>taskId</code> - ID of a task to be polled for status.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Status, timer values, return values, ... or null if there is no such task.</dd>
</dl>
</li>
</ul>
<a name="workThroughTasks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>workThroughTasks</h4>
<pre>private&nbsp;void&nbsp;workThroughTasks()</pre>
<div class="block">This method is called by a timer every second, checking whether or not there is <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a>
 running and if there is none, it takes the first one from the pending queue.</div>
</li>
</ul>
<a name="purgeOutdatedReturnValues--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeOutdatedReturnValues</h4>
<pre>private&nbsp;void&nbsp;purgeOutdatedReturnValues()</pre>
<div class="block">This method checks the pool of finished / failed <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a> and removes those after expiration.</div>
</li>
</ul>
<a name="purgeTimedOutPendingTasks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeTimedOutPendingTasks</h4>
<pre>private&nbsp;void&nbsp;purgeTimedOutPendingTasks()</pre>
<div class="block">This method checks the queue of pending <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>tasks</code></a> and removes those after expiration.</div>
</li>
</ul>
<a name="searchForTask-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchForTask</h4>
<pre>private&nbsp;<a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons">Task</a>&nbsp;searchForTask(java.lang.String&nbsp;taskId,
                           boolean&nbsp;searchAlsoAmongFinishedTasks)</pre>
<div class="block">Searches for a <a href="../../../../eu/bavenir/ogwapi/commons/Task.html" title="class in eu.bavenir.ogwapi.commons"><code>task</code></a> identified by the parameter. A boolean value can be 
 added to search also among the failed / finished tasks (there are occasions when there is no need for it).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>taskId</code> - ID of the task to be sought for.</dd>
<dd><code>searchAlsoAmongFinishedTasks</code> - Set this to true if there is a valid assumption that the task can be among 
 finished / failed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Found task or null.</dd>
</dl>
</li>
</ul>
<a name="printStatusOfAllTasks--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>printStatusOfAllTasks</h4>
<pre>private&nbsp;void&nbsp;printStatusOfAllTasks()</pre>
<div class="block">Debugging method for convenient printout of all tasks for this particular action. In order to be useful,
 the debugging level has to be set to finest.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Action.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../eu/bavenir/ogwapi/commons/CommunicationManager.html" title="class in eu.bavenir.ogwapi.commons"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?eu/bavenir/ogwapi/commons/Action.html" target="_top">Frames</a></li>
<li><a href="Action.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
