<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Fri Jun 09 15:45:33 CEST 2017 -->
<title>CommunicationNode</title>
<meta name="date" content="2017-06-09">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CommunicationNode";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CommunicationNode.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/AgentCommunicator.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/ReceivedMessage.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html" target="_top">Frames</a></li>
<li><a href="CommunicationNode.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">eu.bavenir.vicinity.gatewayapi.xmpp</div>
<h2 title="Class CommunicationNode" class="title">Class CommunicationNode</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">CommunicationNode</span>
extends java.lang.Object</pre>
<div class="block">This class serves as a connection manager for XMPP communication over P2P network. There is usually only need
 for a single instance of this class, even if there are several devices connecting through the Gateway API. The 
 instance of this class maintains a pool of connection descriptors, where each descriptor represents one separate 
 client connection. The thread safe pool is based on a synchronized <code>HashMap</code> implementation.
 
  It is important that the private methods for operations over the descriptor pool are used when extending or 
  modifying this class instead of the direct approach to the descriptorPool HashMap (direct methods can however still
  be used if they don't alter the HashMap's structure or values).
  
  Usual modus operandi of this class is as follows:
  
  1. establishConnection - use as many times as necessary
  2. use all the methods as necessary for communication
  3. terminateConnection - if there is a need to close a connection for some device. 
  4. terminateAllConnections - cleanup when the application shuts down. 
  
  After step 4, it is safe to start a new with step 1. 
  
  
  MESSAGES
  
  All communication among connected XMPP clients is exchanged via XMPP messages. In general there are only 2 types
  of messages that are exchanged:
  
  a) requests  -        An Object is requesting an access to a service of another Object (or Agent). This request needs to 
                                be propagated across XMPP network and at the end of the communication pipe, the message has to be
                                translated into valid HTTP request to an Agent service. Translating the message is as well as 
                                their detailed structure is described in <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/AgentCommunicator.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><code>AgentCommunicator</code></a>.
  
  b) responses -        The value returned by Object / Agent services in JSON, that is propagated back to the caller.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>sulfo</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_REQ_ID">ATTR_REQ_ID</a></span></code>
<div class="block">Attribute with a request ID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_REQUESTOPERATION">ATTR_REQUESTOPERATION</a></span></code>
<div class="block">Insert this attribute at the beginning of a message JSON that needs to be processed as a request by receiving
 connection <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><code>descriptor</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_VAL_OPERATIONDEL">ATTR_VAL_OPERATIONDEL</a></span></code>
<div class="block">Value that is used, when the requested operation is HTTP DELETE.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_VAL_OPERATIONGET">ATTR_VAL_OPERATIONGET</a></span></code>
<div class="block">Value that is used, when the requested operation is HTTP GET.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_VAL_OPERATIONPOST">ATTR_VAL_OPERATIONPOST</a></span></code>
<div class="block">Value that is used, when the requested operation is HTTP POST.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_VAL_OPERATIONPUT">ATTR_VAL_OPERATIONPUT</a></span></code>
<div class="block">Value that is used, when the requested operation is HTTP PUT.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.commons.configuration2.XMLConfiguration</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#config">config</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#CONFIG_DEF_XMPPDEBUG">CONFIG_DEF_XMPPDEBUG</a></span></code>
<div class="block">Default value of xmpp.debug configuration parameter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#CONFIG_PARAM_XMPPDEBUG">CONFIG_PARAM_XMPPDEBUG</a></span></code>
<div class="block">Name of the configuration parameter for XMPP .</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.Map&lt;java.lang.String,<a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#descriptorPool">descriptorPool</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.logging.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#logger">logger</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#CommunicationNode-org.apache.commons.configuration2.XMLConfiguration-java.util.logging.Logger-">CommunicationNode</a></span>(org.apache.commons.configuration2.XMLConfiguration&nbsp;config,
                 java.util.logging.Logger&nbsp;logger)</code>
<div class="block">Constructor, initializes necessary objects.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#descriptorPoolClear--">descriptorPoolClear</a></span>()</code>
<div class="block">Thread-safe method for clearing the descriptor pool.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#descriptorPoolGet-java.lang.String-">descriptorPoolGet</a></span>(java.lang.String&nbsp;xmppUsername)</code>
<div class="block">Thread-safe method for retrieving a connection descriptor (V) from the descriptor pool by XMPP user name (K).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#descriptorPoolPut-java.lang.String-eu.bavenir.vicinity.gatewayapi.xmpp.XmppConnectionDescriptor-">descriptorPoolPut</a></span>(java.lang.String&nbsp;xmppUsername,
                 <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a>&nbsp;descriptor)</code>
<div class="block">Thread-safe method for inserting a XMPP user name (K) and a descriptor (V) into the descriptor pool.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#descriptorPoolRemove-java.lang.String-">descriptorPoolRemove</a></span>(java.lang.String&nbsp;xmppUsername)</code>
<div class="block">Thread-safe method for removing a connection descriptor (V) from the descriptor pool by XMPP user name (K).</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#establishConnection-java.lang.String-java.lang.String-">establishConnection</a></span>(java.lang.String&nbsp;xmppUsername,
                   java.lang.String&nbsp;xmppPassword)</code>
<div class="block">Establishes a connection to XMPP server with preferences from configuration file and provided credentials.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#getConnectionList--">getConnectionList</a></span>()</code>
<div class="block">Retrieves the XMPP user names that has open connections to XMPP server.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;org.jivesoftware.smack.roster.RosterEntry&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#getRosterEntriesForUser-java.lang.String-">getRosterEntriesForUser</a></span>(java.lang.String&nbsp;username)</code>
<div class="block">Retrieves a collection of roster entries for given user name.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#isConnected-java.lang.String-">isConnected</a></span>(java.lang.String&nbsp;xmppUsername)</code>
<div class="block">Checks whether the XMPP connection <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><code>descriptor</code></a> instance exists for given user and 
 whether or not it is connected to the XMPP server.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>org.jivesoftware.smack.packet.Message</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#retrieveSingleMessage-java.lang.String-">retrieveSingleMessage</a></span>(java.lang.String&nbsp;forUsername)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#sendMessage-java.lang.String-java.lang.String-java.lang.String-">sendMessage</a></span>(java.lang.String&nbsp;sourceUsername,
           java.lang.String&nbsp;destinationUsername,
           java.lang.String&nbsp;message)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#terminateAllConnections--">terminateAllConnections</a></span>()</code>
<div class="block">Closes all open connections to XMPP server.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#terminateConnection-java.lang.String-boolean-">terminateConnection</a></span>(java.lang.String&nbsp;xmppUsername,
                   boolean&nbsp;destroyConnectionDescriptor)</code>
<div class="block">Disconnects a single XMPP connection identified by the connection user name given as the first parameter.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#verifyConnection-java.lang.String-java.lang.String-">verifyConnection</a></span>(java.lang.String&nbsp;xmppUsername,
                java.lang.String&nbsp;xmppPassword)</code>
<div class="block">Verifies the credentials of a client, (for example) trying to reach its XMPP connection 
 <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><code>descriptor</code></a> instance via RESTLET API.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ATTR_REQUESTOPERATION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_REQUESTOPERATION</h4>
<pre>public static final&nbsp;java.lang.String ATTR_REQUESTOPERATION</pre>
<div class="block">Insert this attribute at the beginning of a message JSON that needs to be processed as a request by receiving
 connection <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><code>descriptor</code></a>. The value of the attribute should be the HTTP method
 that needs to be performed. To ensure compatibility, use following constants:
 
  <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_VAL_OPERATIONGET"><code>ATTR_VAL_OPERATIONGET</code></a>
  <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_VAL_OPERATIONPUT"><code>ATTR_VAL_OPERATIONPUT</code></a>
  <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#ATTR_VAL_OPERATIONPOST"><code>ATTR_VAL_OPERATIONPOST</code></a>
  <code>ATTR_VAL_OPERATIONDELETE</code></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html#processMessage-org.jxmpp.jid.EntityBareJid-org.jivesoftware.smack.packet.Message-org.jivesoftware.smack.chat2.Chat-"><code>XmppConnectionDescriptor.processMessage(org.jxmpp.jid.EntityBareJid, org.jivesoftware.smack.packet.Message, org.jivesoftware.smack.chat2.Chat)</code></a>, 
<a href="../../../../../constant-values.html#eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode.ATTR_REQUESTOPERATION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_VAL_OPERATIONGET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_VAL_OPERATIONGET</h4>
<pre>public static final&nbsp;java.lang.String ATTR_VAL_OPERATIONGET</pre>
<div class="block">Value that is used, when the requested operation is HTTP GET.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode.ATTR_VAL_OPERATIONGET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_VAL_OPERATIONPUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_VAL_OPERATIONPUT</h4>
<pre>public static final&nbsp;java.lang.String ATTR_VAL_OPERATIONPUT</pre>
<div class="block">Value that is used, when the requested operation is HTTP PUT.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode.ATTR_VAL_OPERATIONPUT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_VAL_OPERATIONDEL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_VAL_OPERATIONDEL</h4>
<pre>public static final&nbsp;java.lang.String ATTR_VAL_OPERATIONDEL</pre>
<div class="block">Value that is used, when the requested operation is HTTP DELETE.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode.ATTR_VAL_OPERATIONDEL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_VAL_OPERATIONPOST">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_VAL_OPERATIONPOST</h4>
<pre>public static final&nbsp;java.lang.String ATTR_VAL_OPERATIONPOST</pre>
<div class="block">Value that is used, when the requested operation is HTTP POST.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode.ATTR_VAL_OPERATIONPOST">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_REQ_ID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_REQ_ID</h4>
<pre>public static final&nbsp;java.lang.String ATTR_REQ_ID</pre>
<div class="block">Attribute with a request ID.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode.ATTR_REQ_ID">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONFIG_PARAM_XMPPDEBUG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONFIG_PARAM_XMPPDEBUG</h4>
<pre>private static final&nbsp;java.lang.String CONFIG_PARAM_XMPPDEBUG</pre>
<div class="block">Name of the configuration parameter for XMPP .</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode.CONFIG_PARAM_XMPPDEBUG">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONFIG_DEF_XMPPDEBUG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONFIG_DEF_XMPPDEBUG</h4>
<pre>private static final&nbsp;boolean CONFIG_DEF_XMPPDEBUG</pre>
<div class="block">Default value of xmpp.debug configuration parameter. This value is taken into account when no suitable
 value is found in the configuration file.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#eu.bavenir.vicinity.gatewayapi.xmpp.CommunicationNode.CONFIG_DEF_XMPPDEBUG">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="descriptorPool">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>descriptorPool</h4>
<pre>private&nbsp;java.util.Map&lt;java.lang.String,<a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a>&gt; descriptorPool</pre>
</li>
</ul>
<a name="config">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>config</h4>
<pre>private&nbsp;org.apache.commons.configuration2.XMLConfiguration config</pre>
</li>
</ul>
<a name="logger">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>logger</h4>
<pre>private&nbsp;java.util.logging.Logger logger</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CommunicationNode-org.apache.commons.configuration2.XMLConfiguration-java.util.logging.Logger-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CommunicationNode</h4>
<pre>public&nbsp;CommunicationNode(org.apache.commons.configuration2.XMLConfiguration&nbsp;config,
                         java.util.logging.Logger&nbsp;logger)</pre>
<div class="block">Constructor, initializes necessary objects. All parameters are mandatory, failure to include them can lead 
 to a swift end of application execution.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - Configuration object.</dd>
<dd><code>logger</code> - Java logger.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="establishConnection-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>establishConnection</h4>
<pre>public&nbsp;<a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a>&nbsp;establishConnection(java.lang.String&nbsp;xmppUsername,
                                                    java.lang.String&nbsp;xmppPassword)</pre>
<div class="block">Establishes a connection to XMPP server with preferences from configuration file and provided credentials. 
 The connection descriptor is then stored in a hash map.
 
 If the connection descriptor for given user already exists, it is closed by the SMACK 
 <code>disconnect()</code> call, discarded and then recreated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmppUsername</code> - XMPP user name without the served domain (i.e. just 'user' instead of 'user@xmpp.server').</dd>
<dd><code>xmppPassword</code> - Password of the user.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The established connection descriptor if the attempt was successful, null otherwise.</dd>
</dl>
</li>
</ul>
<a name="terminateConnection-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>terminateConnection</h4>
<pre>public&nbsp;void&nbsp;terminateConnection(java.lang.String&nbsp;xmppUsername,
                                boolean&nbsp;destroyConnectionDescriptor)</pre>
<div class="block">Disconnects a single XMPP connection identified by the connection user name given as the first parameter. 
 The second parameter specifies, whether the connection descriptor is to be destroyed after it is disconnected.
 If not, the descriptor will remain in the pool and it is possible to use it during eventual reconnection.
 Otherwise connection will have to be build a new (which can be useful when the connection needs to be 
 reconfigured).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmppUsername</code> - User name used to establish the connection.</dd>
<dd><code>destroyConnectionDescriptor</code> - Whether the connection descriptor should also be destroyed or not.</dd>
</dl>
</li>
</ul>
<a name="terminateAllConnections--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>terminateAllConnections</h4>
<pre>public&nbsp;void&nbsp;terminateAllConnections()</pre>
<div class="block">Closes all open connections to XMPP server. It will also clear these connection handlers off the connection 
 descriptor pool table, preventing the re-connection (they have to be reconfigured to be opened again).</div>
</li>
</ul>
<a name="getConnectionList--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnectionList</h4>
<pre>public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;getConnectionList()</pre>
<div class="block">Retrieves the XMPP user names that has open connections to XMPP server. Based on these strings, the respective
 connections can be retrieved from the connection descriptor pool.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Set of user names.</dd>
</dl>
</li>
</ul>
<a name="isConnected-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isConnected</h4>
<pre>public&nbsp;boolean&nbsp;isConnected(java.lang.String&nbsp;xmppUsername)</pre>
<div class="block">Checks whether the XMPP connection <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><code>descriptor</code></a> instance exists for given user and 
 whether or not it is connected to the XMPP server. Returns true or false accordingly.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmppUsername</code> - XMPP user name in question.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if descriptor exists and the connection is established.</dd>
</dl>
</li>
</ul>
<a name="verifyConnection-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyConnection</h4>
<pre>public&nbsp;boolean&nbsp;verifyConnection(java.lang.String&nbsp;xmppUsername,
                                java.lang.String&nbsp;xmppPassword)</pre>
<div class="block">Verifies the credentials of a client, (for example) trying to reach its XMPP connection 
 <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><code>descriptor</code></a> instance via RESTLET API. This method should be called after 
 <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html#isConnected-java.lang.String-"><code>isConnected</code></a> is called first, otherwise will always return false. 
 It is safe to use this method when processing authentication of every request.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmppUsername</code> - XMPP user name in question.</dd>
<dd><code>xmppPassword</code> - The password that is to be verified.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True, if the password is valid.</dd>
</dl>
</li>
</ul>
<a name="getRosterEntriesForUser-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRosterEntriesForUser</h4>
<pre>public&nbsp;java.util.Collection&lt;org.jivesoftware.smack.roster.RosterEntry&gt;&nbsp;getRosterEntriesForUser(java.lang.String&nbsp;username)</pre>
<div class="block">Retrieves a collection of roster entries for given user name. If there is no connection established with the 
 given user name, returns empty <code>Collection</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - XMPP user name the roster is to be retrieved for.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Collection of roster entries. If no connection is established for the user name, the collection is empty
 (not null).</dd>
</dl>
</li>
</ul>
<a name="sendMessage-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMessage</h4>
<pre>public&nbsp;boolean&nbsp;sendMessage(java.lang.String&nbsp;sourceUsername,
                           java.lang.String&nbsp;destinationUsername,
                           java.lang.String&nbsp;message)</pre>
</li>
</ul>
<a name="retrieveSingleMessage-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieveSingleMessage</h4>
<pre>public&nbsp;org.jivesoftware.smack.packet.Message&nbsp;retrieveSingleMessage(java.lang.String&nbsp;forUsername)</pre>
</li>
</ul>
<a name="descriptorPoolPut-java.lang.String-eu.bavenir.vicinity.gatewayapi.xmpp.XmppConnectionDescriptor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>descriptorPoolPut</h4>
<pre>private&nbsp;<a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a>&nbsp;descriptorPoolPut(java.lang.String&nbsp;xmppUsername,
                                                   <a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a>&nbsp;descriptor)</pre>
<div class="block">Thread-safe method for inserting a XMPP user name (K) and a descriptor (V) into the descriptor pool. This is a
 synchronized equivalent for <code>put()</code> method of HashMap table.
 
    IMPORTANT: It is imperative to use only this method to interact with the descriptor pool when adding
    or modifying functionality of this class and avoid the original HashMap's
    <code>put()</code> method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmppUsername</code> - The key part of the <code>HashMap</code> key-value pair in the descriptor pool.</dd>
<dd><code>descriptor</code> - The value part of the <code>HashMap</code> key-value pair in the descriptor pool.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The previous value associated with key, or null if there was no mapping for key. 
 (A null return can also indicate that the map previously associated null with key, if the implementation 
 supports null values.)</dd>
</dl>
</li>
</ul>
<a name="descriptorPoolGet-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>descriptorPoolGet</h4>
<pre>private&nbsp;<a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a>&nbsp;descriptorPoolGet(java.lang.String&nbsp;xmppUsername)</pre>
<div class="block">Thread-safe method for retrieving a connection descriptor (V) from the descriptor pool by XMPP user name (K). 
 This is a synchronized equivalent for <code>get()</code> method of HashMap table.
 
    IMPORTANT: It is imperative to use only this method to interact with the descriptor pool when adding
    or modifying functionality of this class and avoid the original HashMap's
    <code>get()</code> method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmppUsername</code> - The key part of the <code>HashMap</code> key-value pair in the descriptor pool.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value to which the specified key is mapped, or null if this map contains no mapping for the key.</dd>
</dl>
</li>
</ul>
<a name="descriptorPoolRemove-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>descriptorPoolRemove</h4>
<pre>private&nbsp;<a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/XmppConnectionDescriptor.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp">XmppConnectionDescriptor</a>&nbsp;descriptorPoolRemove(java.lang.String&nbsp;xmppUsername)</pre>
<div class="block">Thread-safe method for removing a connection descriptor (V) from the descriptor pool by XMPP user name (K). 
 This is a synchronized equivalent for <code>remove()</code> method of HashMap table.
 
    IMPORTANT: It is imperative to use only this method to interact with the descriptor pool when adding
    or modifying functionality of this class and avoid the original HashMap's
    <code>remove()</code> method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xmppUsername</code> - The key part of the <code>HashMap</code> key-value pair in the descriptor pool.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The previous value associated with key, or null if there was no mapping for key.</dd>
</dl>
</li>
</ul>
<a name="descriptorPoolClear--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>descriptorPoolClear</h4>
<pre>private&nbsp;void&nbsp;descriptorPoolClear()</pre>
<div class="block">Thread-safe method for clearing the descriptor pool. This is a synchronized equivalent for 
 <code>clear()</code> method of HashMap table.
 
    IMPORTANT: It is imperative to use only this method to interact with the descriptor pool when adding
    or modifying functionality of this class and avoid the original HashMap's
    <code>get()</code> method.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CommunicationNode.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/AgentCommunicator.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../eu/bavenir/vicinity/gatewayapi/xmpp/ReceivedMessage.html" title="class in eu.bavenir.vicinity.gatewayapi.xmpp"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?eu/bavenir/vicinity/gatewayapi/xmpp/CommunicationNode.html" target="_top">Frames</a></li>
<li><a href="CommunicationNode.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
